[{"path":"https://bips-hb.github.io/APTS_Causal_Inference/articles/Commands.html","id":"r-commands","dir":"Articles","previous_headings":"","what":"R Commands","title":"R Commands for Causal Inference","text":"document contains example code blocks, can used exercise bcrot dataset.","code":"library(APTSCausalInference) library(ggplot2) data(bcrot)"},{"path":"https://bips-hb.github.io/APTS_Causal_Inference/articles/Commands.html","id":"plotting","dir":"Articles","previous_headings":"R Commands","what":"Plotting","title":"R Commands for Causal Inference","text":"gives histograms comparing quality life hormone treatment control. gives density plot proposensity score (ps).","code":"plot.qol <- ggplot(bcrot, aes(x=qol, after_stat(density)), fill=as.factor(hormon)) +     geom_histogram(aes(fill=as.factor(hormon)), color=c(\"#e9ecef\"), binwidth = 2) +     facet_grid(as.factor(hormon) ~ .) +     labs(x = \"Quality of life\", y = \"Density\") +     scale_fill_manual(values=c(\"#69b3a2\", \"#337CA0\"),                       name=\"Hormonal\\ntreatment\",                       breaks=c(\"0\", \"1\"),                       labels=c(\"no\", \"yes\")) +     theme_light() plot.qol # plot density ggplot(bcrot, aes(ps, fill = as.factor(hormon))) +   geom_density(alpha = 0.5) +   labs(x = \"Propensity score\",        y = \"Density\",        fill = \"Hormone\\ntreatment\") +   scale_fill_manual(values=c(\"#69b3a2\", \"#337CA0\"),                     name=\"Hormonal\\ntreatment\",                     breaks=c(\"0\", \"1\"),                     labels=c(\"no\", \"yes\")) +   theme_light()"},{"path":"https://bips-hb.github.io/APTS_Causal_Inference/articles/Commands.html","id":"love-plots","dir":"Articles","previous_headings":"R Commands","what":"Love Plots","title":"R Commands for Causal Inference","text":"Love plots can obtained command cobalt::love.plot. Make sure put right entry right-hand side formula, data argument!","code":"cobalt::love.plot(hormon_i ~ XXX ,                    data =  XXX  ,                    weights = bcrot$w,                   s.d.denom = \"pooled\",                   thresholds = c(m = .1))"},{"path":"https://bips-hb.github.io/APTS_Causal_Inference/articles/Commands.html","id":"subsetting-and-filtering","dir":"Articles","previous_headings":"R Commands","what":"Subsetting and Filtering","title":"R Commands for Causal Inference","text":"","code":"# restrict dataset and transformation bcrot2 <- bcrot %>% filter(age >= 40,      # keep only individuals over 40                            XXX) %>%   # XXXX FILL IN! w/>= 1 cancerous node                     mutate(age2 = age * age) %>%    # add age²                     select(-c(ps, w))      # drop propensity score and weights"},{"path":"https://bips-hb.github.io/APTS_Causal_Inference/articles/Commands.html","id":"regression-standardization","dir":"Articles","previous_headings":"R Commands","what":"Regression Standardization","title":"R Commands for Causal Inference","text":"","code":"fit <- glm(qol ~ hormon*age + XXXX,  ## fill in other variables!            data = bcrot2) fit.std <- stdGlm(fit = fit, data = as.data.frame(bcrot2), X = \"hormon\") print(summary(fit.std)) plot(fit.std)  # Confidence interval: Mean difference  summary(fit.std, contrast = \"difference\", reference = \"0\")"},{"path":"https://bips-hb.github.io/APTS_Causal_Inference/articles/Commands.html","id":"aipw","dir":"Articles","previous_headings":"R Commands","what":"AIPW","title":"R Commands for Causal Inference","text":"","code":"# Build SuperLearner libraries for outcome (Q) and exposure models (g) sl.lib <- c(\"SL.mean\",\"SL.glm\")    # Construct an aipw object for later estimations  AIPW_SL <- AIPW::AIPW$new(Y = bcrot2$qol,                           A = bcrot2$hormon_i,                           W = subset(bcrot2, select = c(XXX)),   # fill in!                           Q.SL.library = sl.lib,                           g.SL.library = sl.lib,                           k_split = 10,                           verbose = TRUE)  # Fit the data to the AIPW object and check the balance of propensity scores raipw <- AIPW_SL$fit()$summary() AIPW_SL$fit()$plot.p_score()$plot.ip_weights()  # Truncate weights (default truncation is set to 0.025) AIPW_SL$fit()$summary(g.bound = c(0.05, 0.95))$plot.p_score()$plot.ip_weights()  # Calculate average treatment effects among the treated/untreated (controls) (ATT/ATC) AIPW_SL$stratified_fit()$summary()   # extract weights for loveplots # AIPW_SL$plot.ip_weights() bcrot2$aipw <- AIPW_SL$ip_weights.plot$data$ip_weights"},{"path":[]},{"path":"https://bips-hb.github.io/APTS_Causal_Inference/articles/installation.html","id":"scenario-1-you-have-a-github-account","dir":"Articles","previous_headings":"How to install: Step-by-step","what":"Scenario 1: You have a GitHub account","title":"Installation: Step-by-step","text":"1. Generate Personal Access Token (PAT) Go [GitHub → Settings → Developer Settings → Personal Access Tokens → Tokens (classic)]. Click “Generate new token”. Give name (e.g., R Pak Token). R packages: repo read:packages enough. Click Generate token. Copy token immediately — won’t see . 2. Set PAT R temporarily works current R session: 3. Set PAT permanently opens .Renviron file. Add line: Save file restart R. Now GitHub installs automatically use PAT. 4. Install packages GitHub","code":"Sys.setenv(GITHUB_PAT = \"your_personal_access_token_here\") install.packages(\"usethis\")  # if not already installed  usethis::edit_r_environ() GITHUB_PAT=your_personal_access_token_here # during installation: plz update all packages!!! install.packages(\"pak\") options(pkg.build_vignettes = TRUE) # important to build the vignette pak::pkg_install(\"bips-hb/APTS_Causal_Inference\")  # load package library(APTSCausalInference)  # Load the data data(bcrot)"},{"path":"https://bips-hb.github.io/APTS_Causal_Inference/articles/installation.html","id":"scenario-2-you-do-not-have-a-github-account","dir":"Articles","previous_headings":"How to install: Step-by-step","what":"Scenario 2: You do NOT have a GitHub account","title":"Installation: Step-by-step","text":"GitHub account, download package manually Go package’s GitHub page. Click Code → Download ZIP. Unzip folder. R (change path!!!!): installs package without needing GitHub credentials.","code":"setwd(\"path/to/APTS_Causal_Inference/\")  install.packages(\"pak\") options(pkg.build_vignettes = TRUE) # important to build the vignette pak::local_install(\"path/to/APTS_Causal_Inference/APTSCausalInference_1.1.0.tar.gz\")  # or install.packages(\"path/to/APTS_Causal_Inference/APTSCausalInference_1.1.0.tar.gz\",     repos = NULL, type = \"source\")   # load package library(APTSCausalInference)  # Load the data data(bcrot)"},{"path":"https://bips-hb.github.io/APTS_Causal_Inference/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"R Foraita. Maintainer.","code":""},{"path":"https://bips-hb.github.io/APTS_Causal_Inference/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"c , \"foraita@leibniz-bips.de\") e=, person, \"didelez@leibniz-bips.de\") e=, person, \"evans@stats.ox.ac.uk\") e=, person, \"karla.diaz-ordaz@ucl.ac.uk\") e=, ) (2025). APTSCausalInference: Practicals APTS Module \"Causal Inference\" 2025 (V. Didelez, R.J. Evans K. Diaz-Ordaz). R package version 1.1.0, https://bips-hb.github.io/APTS_Causal_Inference/.","code":"@Manual{,   title = {APTSCausalInference: Practicals for the APTS Module \"Causal Inference\" 2025 (V. Didelez, R.J. Evans and K. Diaz-Ordaz)},   author = {Authors@R: c and email = \"foraita@leibniz-bips.de\") and {person} and email = \"didelez@leibniz-bips.de\") and {person} and email = \"evans@stats.ox.ac.uk\") and {person} and email = \"karla.diaz-ordaz@ucl.ac.uk\") and {)}},   year = {2025},   note = {R package version 1.1.0},   url = {https://bips-hb.github.io/APTS_Causal_Inference/}, }"},{"path":"https://bips-hb.github.io/APTS_Causal_Inference/index.html","id":"practicals-for-the-apts-module-causal-inference-2025","dir":"","previous_headings":"","what":"Practicals for the APTS Module ","title":"Practicals for the APTS Module ","text":"V. Didelez, R.J. Evans K. Diaz-Ordaz Practicals Module “Causal Inference” Academy PhD Training Statistics (https://warwick.ac.uk/fac/sci/statistics/apts/programme/causinf/) APTS recommend using Codespace set Louis Aslett Machine Learning module.","code":""},{"path":"https://bips-hb.github.io/APTS_Causal_Inference/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Practicals for the APTS Module ","text":"use machine, ensure R v4.0.0 higher. Windows users, please make sure rtools installed computer! (https://cran.r-project.org/bin/windows/Rtools/) 💡 Note step--step guide install package can found : https://bips-hb.github.io/APTS_Causal_Inference/articles/installation.html","code":""},{"path":"https://bips-hb.github.io/APTS_Causal_Inference/index.html","id":"code-snippets","dir":"","previous_headings":"","what":"Code Snippets","title":"Practicals for the APTS Module ","text":"Visit https://bips-hb.github.io/APTS_Causal_Inference/articles/Commands.html collection handy code snippets. typical R commands conducting causal inference. help solving practical exercises course support understanding application discussed methods. full solutions provided course.","code":""},{"path":"https://bips-hb.github.io/APTS_Causal_Inference/reference/bcrot.html","id":null,"dir":"Reference","previous_headings":"","what":"Rotterdam data set on breast cancer — bcrot","title":"Rotterdam data set on breast cancer — bcrot","text":"Rotterdam data set includes 2982 primary breast cancers patients whose data whose records included Rotterdam tumor bank. generated synthetic outcome ‘qol’ (health related quality life, continuous measure) based existing data.","code":""},{"path":"https://bips-hb.github.io/APTS_Causal_Inference/reference/bcrot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Rotterdam data set on breast cancer — bcrot","text":"","code":"data(bcrot)"},{"path":"https://bips-hb.github.io/APTS_Causal_Inference/reference/bcrot.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Rotterdam data set on breast cancer — bcrot","text":"data frame 2982 observations following 6 variables: hormon hormonal treatment (0=, 1=yes) age age diagnosis nodes number positive lymph nodes enodes exp(-0.12 * nodes) pr_1 progestorone receptors (fmol/l), transformed: log(pr + 1) qol health realted quality life","code":""},{"path":"https://bips-hb.github.io/APTS_Causal_Inference/reference/bcrot.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Rotterdam data set on breast cancer — bcrot","text":"https://www.pclambert.net/data/rott2b.dta","code":""}]
